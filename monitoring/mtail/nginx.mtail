counter http_requests_total by method, status, endpoint

/^/ +
/(?P<remote_addr>[0-9\.]+) / +
/- / +
/(?P<remote_user>\S+) / +
/\[(?P<time_local>[^\]]+)\] / +
/"(?P<method>[A-Z]+) / +
/(?P<endpoint>[^\s\?]+)/ +
/[^\s]* / +
/(?P<protocol>[^"]+)" / +
/(?P<status>\d+) / +
/(?P<body_bytes_sent>\d+) / +
/"(?P<http_referer>[^"]*)" / +
/"(?P<http_user_agent>[^"]*)"/ +
/$/ {
  http_requests_total[$method][$status][$endpoint]++
}
